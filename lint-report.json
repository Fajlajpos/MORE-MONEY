[{"filePath":"C:\\Users\\Fajlajp\\Desktop\\MORE MONEY\\eslint.config.mjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Fajlajp\\Desktop\\MORE MONEY\\gethash.js","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":2,"column":16,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":2,"endColumn":35,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Fajlajp\\Desktop\\MORE MONEY\\next.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Fajlajp\\Desktop\\MORE MONEY\\parse-lint.js","messages":[{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":1,"column":12,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":1,"endColumn":25},{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":7,"column":26,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":7,"endColumn":41}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const fs = require('fs');\r\ntry {\r\n    const report = JSON.parse(fs.readFileSync('lint-report.json', 'utf8'));\r\n    report.forEach(f => {\r\n        const errors = f.messages.filter(m => m.severity === 2);\r\n        if (errors.length > 0) {\r\n            const path = require('path');\r\n            errors.forEach(m => {\r\n                console.log(`${path.basename(path.dirname(f.filePath))}/${path.basename(f.filePath)}:${m.line}:${m.column} ${m.message} (${m.ruleId})`);\r\n            });\r\n        }\r\n    });\r\n} catch (e) {\r\n    console.error('Error parsing report:', e);\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Fajlajp\\Desktop\\MORE MONEY\\postcss.config.mjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Fajlajp\\Desktop\\MORE MONEY\\prisma\\client.js","messages":[{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":1,"column":26,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":1,"endColumn":51}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const { PrismaClient } = require('@prisma/client')\n\nconst prisma = new PrismaClient()\n\nmodule.exports = prisma\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Fajlajp\\Desktop\\MORE MONEY\\prisma\\seed.js","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":2,"column":16,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":2,"endColumn":35,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Fajlajp\\Desktop\\MORE MONEY\\scripts\\check-user.js","messages":[{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":1,"column":26,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":1,"endColumn":51},{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":2,"column":14,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":2,"endColumn":29},{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":3,"column":1,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":3,"endColumn":18}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const { PrismaClient } = require('@prisma/client')\r\nconst path = require('path')\r\nrequire('dotenv').config({ path: path.join(__dirname, '../.env') })\r\n\r\nconst prisma = new PrismaClient()\r\n\r\nasync function main() {\r\n    try {\r\n        const email = 'filipmayer7@gmail.com'\r\n        console.log(`Searching for user: ${email}`)\r\n\r\n        const user = await prisma.user.findUnique({\r\n            where: { email }\r\n        })\r\n\r\n        if (user) {\r\n            console.log('User found!')\r\n            console.log('ID:', user.id)\r\n            console.log('Email:', user.email)\r\n            console.log('Role:', user.role)\r\n            console.log('PasswordHash prefix:', user.passwordHash ? user.passwordHash.substring(0, 10) + '...' : 'NULL')\r\n        } else {\r\n            console.log('User NOT found.')\r\n        }\r\n\r\n    } catch (e) {\r\n        console.error('Error:', e)\r\n    } finally {\r\n        await prisma.$disconnect()\r\n    }\r\n}\r\n\r\nmain()\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Fajlajp\\Desktop\\MORE MONEY\\scripts\\db-check.js","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":2,"column":20,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":2,"endColumn":33,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Fajlajp\\Desktop\\MORE MONEY\\scripts\\debug-seed.js","messages":[{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":1,"column":26,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":1,"endColumn":51},{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":2,"column":14,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":2,"endColumn":29},{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":3,"column":1,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":3,"endColumn":18}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const { PrismaClient } = require('@prisma/client')\r\nconst path = require('path')\r\nrequire('dotenv').config({ path: path.join(__dirname, '../.env') })\r\n\r\nconsole.log('DB URL:', process.env.DATABASE_URL ? 'Found' : 'Missing')\r\nconsole.log('Email:', process.env.ADMIN_EMAIL)\r\nconsole.log('Password:', process.env.ADMIN_PASSWORD ? '****' : 'Missing')\r\n\r\nconst prisma = new PrismaClient()\r\n\r\nasync function main() {\r\n    try {\r\n        console.log('Connecting...')\r\n        await prisma.$connect()\r\n        console.log('Connected!')\r\n\r\n        // Try to create user\r\n        const hashedPassword = 'debug_hash_placeholder' // Skip bcrypt for now to isolate db\r\n\r\n        const user = await prisma.user.upsert({\r\n            where: { email: process.env.ADMIN_EMAIL },\r\n            update: {},\r\n            create: {\r\n                email: process.env.ADMIN_EMAIL,\r\n                passwordHash: hashedPassword,\r\n                name: 'Debug Admin',\r\n                role: 'ADMIN'\r\n            }\r\n        })\r\n        console.log('User upserted:', user.email)\r\n\r\n    } catch (e) {\r\n        console.error('ERROR:', e)\r\n    } finally {\r\n        await prisma.$disconnect()\r\n    }\r\n}\r\n\r\nmain()\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Fajlajp\\Desktop\\MORE MONEY\\scripts\\hash-gen.js","messages":[{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":1,"column":16,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":1,"endColumn":35},{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":4,"column":12,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":4,"endColumn":25}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const bcrypt = require('bcryptjs')\r\nconst password = 'Nevimnevim16'\r\nconst hash = bcrypt.hashSync(password, 12)\r\nconst fs = require('fs')\r\nfs.writeFileSync('hash.txt', hash)\r\nconsole.log('Hash written to hash.txt')\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Fajlajp\\Desktop\\MORE MONEY\\scripts\\minimal-seed.js","messages":[{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":1,"column":26,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":1,"endColumn":51}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const { PrismaClient } = require('@prisma/client')\r\n\r\nconst prisma = new PrismaClient({\r\n    datasources: {\r\n        db: {\r\n            url: \"postgresql://postgres:admin@127.0.0.1:5432/MAKE_MONEY?schema=public\"\r\n        }\r\n    }\r\n})\r\n\r\nasync function main() {\r\n    console.log('Starting minimal seed...')\r\n    try {\r\n        // Simple hash to avoid bcrypt dependency issues\r\n        const hashedPassword = '$2a$12$eXgZ/somehash'\r\n        const email = 'filipmayer7@gmail.com'\r\n\r\n        console.log('Upserting user...')\r\n        const user = await prisma.user.upsert({\r\n            where: { email },\r\n            update: {\r\n                passwordHash: hashedPassword,\r\n                role: 'ADMIN',\r\n                name: 'Admin Filip'\r\n            },\r\n            create: {\r\n                email,\r\n                passwordHash: hashedPassword,\r\n                name: 'Admin Filip',\r\n                role: 'ADMIN',\r\n                tier: 'PREMIUM_PLUS'\r\n            },\r\n        })\r\n        console.log('User created/updated:', user)\r\n    } catch (e) {\r\n        console.error('ERROR:', e)\r\n    } finally {\r\n        await prisma.$disconnect()\r\n    }\r\n}\r\n\r\nmain()\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Fajlajp\\Desktop\\MORE MONEY\\scripts\\pg-test-login.js","messages":[{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":1,"column":20,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":1,"endColumn":33},{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":2,"column":16,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":2,"endColumn":35}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const { Client } = require('pg')\r\nconst bcrypt = require('bcryptjs')\r\n\r\nconst client = new Client({\r\n    connectionString: \"postgresql://postgres:admin@127.0.0.1:5432/MAKE_MONEY?schema=public\"\r\n})\r\n\r\nasync function main() {\r\n    const email = 'filipmayer7@gmail.com'\r\n    const password = 'Nevimnevim16'\r\n\r\n    console.log(`[PG-TEST] Checking user: ${email}`)\r\n\r\n    try {\r\n        await client.connect()\r\n\r\n        const res = await client.query('SELECT * FROM \"User\" WHERE email = $1', [email])\r\n\r\n        if (res.rows.length === 0) {\r\n            console.log('[PG-TEST] User NOT FOUND.')\r\n            return\r\n        }\r\n\r\n        const user = res.rows[0]\r\n        console.log('[PG-TEST] User FOUND:', user.email)\r\n        console.log(`[PG-TEST] Hash in DB: ${user.passwordHash}`)\r\n\r\n        const match = await bcrypt.compare(password, user.passwordHash)\r\n\r\n        if (match) {\r\n            console.log('[PG-TEST] SUCCESS: Password matches!')\r\n        } else {\r\n            console.log('[PG-TEST] FAILURE: Password does NOT match.')\r\n        }\r\n\r\n    } catch (e) {\r\n        console.error('[PG-TEST] Error:', e)\r\n    } finally {\r\n        await client.end()\r\n    }\r\n}\r\n\r\nmain()\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Fajlajp\\Desktop\\MORE MONEY\\scripts\\run_migration.js","messages":[{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":1,"column":1,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":1,"endColumn":18},{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":2,"column":18,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":2,"endColumn":31},{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":3,"column":12,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":3,"endColumn":25},{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":4,"column":14,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":4,"endColumn":29}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"require('dotenv').config();\r\nconst { Pool } = require('pg');\r\nconst fs = require('fs');\r\nconst path = require('path');\r\n\r\nasync function runMigration() {\r\n    console.log(\"Starting manual migration...\");\r\n\r\n    if (!process.env.DATABASE_URL) {\r\n        console.error(\"Error: DATABASE_URL is not set in environment.\");\r\n        process.exit(1);\r\n    }\r\n\r\n    const pool = new Pool({\r\n        connectionString: process.env.DATABASE_URL,\r\n    });\r\n\r\n    try {\r\n        const client = await pool.connect();\r\n        console.log(\"Connected to database.\");\r\n\r\n        const sqlPath = path.join(__dirname, 'update_db.sql');\r\n        const sql = fs.readFileSync(sqlPath, 'utf8');\r\n\r\n        console.log(\"Executing SQL script...\");\r\n        await client.query(sql);\r\n\r\n        console.log(\"Migration completed successfully.\");\r\n        client.release();\r\n    } catch (err) {\r\n        console.error(\"Migration failed:\", err);\r\n    } finally {\r\n        await pool.end();\r\n    }\r\n}\r\n\r\nrunMigration();\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Fajlajp\\Desktop\\MORE MONEY\\scripts\\test-login.js","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":2,"column":26,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":2,"endColumn":51,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'bcrypt' is assigned a value but never used.","line":3,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":13,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":3,"column":16,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":3,"endColumn":35,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'main' is defined but never used.","line":5,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":20,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'prisma' is assigned a value but never used.","line":7,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":17,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Fajlajp\\Desktop\\MORE MONEY\\src\\app\\(auth)\\login\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Fajlajp\\Desktop\\MORE MONEY\\src\\app\\(auth)\\register\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Fajlajp\\Desktop\\MORE MONEY\\src\\app\\(dashboard)\\achievements\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Fajlajp\\Desktop\\MORE MONEY\\src\\app\\(dashboard)\\ai\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Fajlajp\\Desktop\\MORE MONEY\\src\\app\\(dashboard)\\analysis\\page.tsx","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":28,"column":92,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":28,"endColumn":95,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1297,1300],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1297,1300],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":39,"column":11,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":39,"endColumn":14,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1590,1593],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1590,1593],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Fajlajp\\Desktop\\MORE MONEY\\src\\app\\(dashboard)\\budget\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Fajlajp\\Desktop\\MORE MONEY\\src\\app\\(dashboard)\\components\\dashboard-chart.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Fajlajp\\Desktop\\MORE MONEY\\src\\app\\(dashboard)\\dashboard\\page.tsx","messages":[{"ruleId":null,"message":"Unused eslint-disable directive (no problems were reported from '@typescript-eslint/no-explicit-any').","line":80,"column":5,"severity":1,"nodeType":null,"fix":{"range":[3126,3188],"text":" "}}],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":28,"column":11,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":28,"endColumn":14,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1221,1224],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1221,1224],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":33,"column":11,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":33,"endColumn":14,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1425,1428],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1425,1428],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":51,"column":11,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":51,"endColumn":14,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2035,2038],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2035,2038],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":54,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":54,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2118,2121],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2118,2121],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":81,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":81,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3220,3223],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3220,3223],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""},{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":82,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":82,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3258,3261],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3258,3261],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":83,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":83,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3345,3348],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3345,3348],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":103,"column":45,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":103,"endColumn":48,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4421,4424],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4421,4424],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":107,"column":51,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":107,"endColumn":54,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4611,4614],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4611,4614],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":1,"source":"/* eslint-disable @typescript-eslint/no-explicit-any */\r\nimport { auth } from \"@/auth\"\r\nimport { prisma } from \"@/lib/prismadb\"\r\nimport { Card, CardHeader, CardTitle, CardContent } from \"@/components/ui/card\"\r\nimport { ArrowUpRight, TrendingDown, Wallet, ArrowRight } from \"lucide-react\"\r\nimport { format, subMonths } from \"date-fns\"\r\nimport { cs } from \"date-fns/locale\"\r\nimport { AddIncomeSheet } from \"@/components/features/transactions/add-income-sheet\"\r\nimport Link from \"next/link\"\r\nimport { Button } from \"@/components/ui/button\"\r\nimport { SpendingHeatmap } from \"@/components/dashboard/spending-heatmap\"\r\nimport { SavingsProgressBar } from \"@/components/dashboard/savings-progress-bar\"\r\nimport { CashFlowWaterfall } from \"@/components/dashboard/cash-flow-waterfall\"\r\nimport { InsightCard } from \"@/components/dashboard/insight-card\"\r\n\r\nexport default async function DashboardPage() {\r\n    const session = await auth()\r\n\r\n    if (!session?.user?.id) {\r\n        return <div className=\"p-8\">Přihlašte se prosím.</div>\r\n    }\r\n\r\n    // 1. Fetch Basic Data\r\n    const incomes = await prisma.income.findMany({\r\n        where: { userId: session.user.id },\r\n        orderBy: { date: 'desc' },\r\n        take: 5\r\n    }) as any[]\r\n    const expenses = await prisma.variableExpense.findMany({\r\n        where: { userId: session.user.id },\r\n        orderBy: { date: 'desc' },\r\n        take: 50 // Fetch more for heatmap\r\n    }) as any[]\r\n\r\n    // 2. Aggregations\r\n    const totalIncome = (await prisma.income.aggregate({\r\n        where: { userId: session.user.id },\r\n        _sum: { amount: true }\r\n    }))._sum.amount || 0;\r\n\r\n    const totalExpense = (await prisma.variableExpense.aggregate({\r\n        where: { userId: session.user.id },\r\n        _sum: { amount: true }\r\n    }))._sum.amount || 0;\r\n\r\n    const balance = Number(totalIncome) - Number(totalExpense);\r\n\r\n    // 3. AI Insights (Using extended client)\r\n    const insights = await prisma.aiInsight.findMany({\r\n        where: { userId: session.user.id, isRead: false }\r\n    }) as any[];\r\n\r\n    // 4. Prepare Heatmap Data\r\n    const heatmapData = expenses.map((e: any) => ({\r\n        date: e.date,\r\n        amount: Number(e.amount)\r\n    }));\r\n\r\n    // 5. Prepare CashFlow Data (Last 6 Months)\r\n    // Note: In real app, use groupBy. Here we mock aggregation in JS for simplicity or use raw SQL if needed.\r\n    // For specific requirement \"Sloupcový graf porovnání posledních 6 měsíců\"\r\n    const sixMonthsData = [];\r\n    for (let i = 0; i < 6; i++) {\r\n        const date = subMonths(new Date(), i);\r\n        // Mock data for now if DB is empty, or zero.\r\n        // To do this properly requires grouping.\r\n        // We will push placeholders or 0s.\r\n        sixMonthsData.unshift({\r\n            month: format(date, 'MMM', { locale: cs }),\r\n            income: 0, // Placeholder - implementing aggregation inside map is heavy\r\n            expenses: 0\r\n        });\r\n    }\r\n\r\n    // 6. Savings Goal (Mocked or from Settings)\r\n    const monthlyTarget = 15000;\r\n    const currentSavings = Math.max(0, balance); // Simplified savings\r\n\r\n    // Combine recent transactions\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    const recentTransactions: any[] = [\r\n        ...incomes.map((i: any) => ({ ...i, type: 'income' as const })),\r\n        ...expenses.slice(0, 5).map((e: any) => ({ ...e, type: 'expense' as const }))\r\n    ].sort((a, b) => new Date(b.date).getTime() - new Date(a.date).getTime())\r\n        .slice(0, 5);\r\n\r\n    return (\r\n        <div className=\"max-w-7xl mx-auto space-y-8 animate-in fade-in duration-500 p-4\">\r\n            {/* Header Section */}\r\n            <div className=\"flex flex-col md:flex-row md:items-center justify-between gap-4\">\r\n                <div>\r\n                    <h2 className=\"text-3xl font-bold tracking-tight text-gray-900 dark:text-gray-100\">Můj Přehled</h2>\r\n                    <p className=\"text-muted-foreground\">Vítejte zpět, <span className=\"text-blue-600 font-semibold\">{session.user.name || 'Uživateli'}</span></p>\r\n                </div>\r\n                <div className=\"flex items-center gap-2\">\r\n                    <AddIncomeSheet />\r\n                </div>\r\n            </div>\r\n\r\n            {/* AI Insights Section */}\r\n            {insights.length > 0 && (\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n                    {insights.map((insight: any) => (\r\n                        <InsightCard\r\n                            key={insight.id}\r\n                            id={insight.id}\r\n                            type={insight.type as any}\r\n                            title={insight.title}\r\n                            message={insight.message}\r\n                            potentialSaving={insight.potentialSaving}\r\n                        />\r\n                    ))}\r\n                </div>\r\n            )}\r\n\r\n            {/* Main Stats Grid */}\r\n            <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\r\n                {/* Left Col: Savings & Balance */}\r\n                <div className=\"space-y-6\">\r\n                    <SavingsProgressBar current={currentSavings} target={monthlyTarget} />\r\n\r\n                    <Card className=\"bg-gradient-to-br from-indigo-500 via-indigo-600 to-violet-600 text-white border-none shadow-xl relative overflow-hidden\">\r\n                        <div className=\"absolute top-0 right-0 p-8 opacity-10\">\r\n                            <Wallet className=\"w-48 h-48\" />\r\n                        </div>\r\n                        <CardHeader className=\"pb-2\">\r\n                            <CardTitle className=\"text-sm font-medium text-indigo-100 uppercase tracking-wider flex items-center gap-2\">\r\n                                <Wallet className=\"w-4 h-4\" /> Aktuální Zůstatek\r\n                            </CardTitle>\r\n                        </CardHeader>\r\n                        <CardContent>\r\n                            <div className=\"text-5xl font-bold tracking-tight text-white mb-6\">\r\n                                {balance.toLocaleString('cs-CZ')} Kč\r\n                            </div>\r\n                            <div className=\"grid grid-cols-2 gap-4\">\r\n                                <div className=\"bg-white/10 backdrop-blur-sm rounded-xl p-3\">\r\n                                    <p className=\"text-xs text-indigo-100\">Příjmy</p>\r\n                                    <p className=\"font-bold\">+{Number(totalIncome).toLocaleString('cs-CZ')}</p>\r\n                                </div>\r\n                                <div className=\"bg-white/10 backdrop-blur-sm rounded-xl p-3\">\r\n                                    <p className=\"text-xs text-indigo-100\">Výdaje</p>\r\n                                    <p className=\"font-bold\">-{Number(totalExpense).toLocaleString('cs-CZ')}</p>\r\n                                </div>\r\n                            </div>\r\n                        </CardContent>\r\n                    </Card>\r\n                </div>\r\n\r\n                {/* Middle Col: Heatmap */}\r\n                <div className=\"lg:col-span-2 space-y-6\">\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                        <SpendingHeatmap data={heatmapData} />\r\n                        <CashFlowWaterfall data={sixMonthsData} />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Recent Transactions */}\r\n            <div className=\"space-y-4\">\r\n                <div className=\"flex items-center justify-between\">\r\n                    <h3 className=\"text-xl font-semibold text-gray-800 dark:text-gray-100\">Poslední pohyby</h3>\r\n                    <Button variant=\"ghost\" size=\"sm\" asChild className=\"hover:bg-indigo-50 dark:hover:bg-indigo-950/30 group\">\r\n                        <Link href=\"/transactions\" className=\"gap-1\">\r\n                            <span className=\"bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent font-semibold group-hover:from-indigo-500 group-hover:to-purple-500\">Zobrazit vše</span>\r\n                            <ArrowRight className=\"h-4 w-4 text-purple-500\" />\r\n                        </Link>\r\n                    </Button>\r\n                </div>\r\n\r\n                <Card className=\"border-none shadow-sm bg-white/50 dark:bg-gray-900/50 backdrop-blur-sm\">\r\n                    <CardContent className=\"p-0\">\r\n                        {recentTransactions.length > 0 ? (\r\n                            <div className=\"divide-y divide-gray-100 dark:divide-gray-800\">\r\n                                {recentTransactions.map((tx) => (\r\n                                    <div key={tx.id} className=\"flex items-center justify-between p-5 hover:bg-gray-50/50 dark:hover:bg-gray-800/50 transition-colors\">\r\n                                        <div className=\"flex items-center gap-4\">\r\n                                            <div className={`p-3 rounded-2xl ${tx.type === 'income'\r\n                                                ? 'bg-emerald-100 text-emerald-600 dark:bg-emerald-500/20 dark:text-emerald-400'\r\n                                                : 'bg-rose-100 text-rose-600 dark:bg-rose-500/20 dark:text-rose-400'\r\n                                                }`}>\r\n                                                {tx.type === 'income' ? <ArrowUpRight className=\"h-5 w-5\" /> : <TrendingDown className=\"h-5 w-5\" />}\r\n                                            </div>\r\n                                            <div>\r\n                                                <p className=\"font-semibold text-gray-900 dark:text-gray-100\">\r\n                                                    {tx.type === 'expense' ? tx.category : tx.source}\r\n                                                </p>\r\n                                                <p className=\"text-sm text-gray-500\">\r\n                                                    {tx.description || format(new Date(tx.date), 'dd. MMMM yyyy', { locale: cs })}\r\n                                                </p>\r\n                                            </div>\r\n                                        </div>\r\n                                        <div className={`text-lg font-bold ${tx.type === 'expense'\r\n                                            ? 'text-rose-600 dark:text-rose-400'\r\n                                            : 'text-emerald-600 dark:text-emerald-400'\r\n                                            }`}>\r\n                                            {tx.type === 'expense' ? '-' : '+'}{Number(tx.amount).toLocaleString('cs-CZ')} Kč\r\n                                        </div>\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                        ) : (\r\n                            <div className=\"p-12 text-center text-muted-foreground\">\r\n                                <p>Zatím žádné transakce</p>\r\n                            </div>\r\n                        )}\r\n                    </CardContent>\r\n                </Card>\r\n            </div>\r\n        </div>\r\n    )\r\n}","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Fajlajp\\Desktop\\MORE MONEY\\src\\app\\(dashboard)\\goals\\page.tsx","messages":[],"suppressedMessages":[{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":62,"column":45,"nodeType":"JSXOpeningElement","endLine":66,"endColumn":47,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Fajlajp\\Desktop\\MORE MONEY\\src\\app\\(dashboard)\\investments\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Fajlajp\\Desktop\\MORE MONEY\\src\\app\\(dashboard)\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Fajlajp\\Desktop\\MORE MONEY\\src\\app\\(dashboard)\\leaderboard\\page.tsx","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":12,"column":74,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":12,"endColumn":77,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[517,520],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[517,520],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Fajlajp\\Desktop\\MORE MONEY\\src\\app\\(dashboard)\\settings\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Fajlajp\\Desktop\\MORE MONEY\\src\\app\\(dashboard)\\transactions\\page.tsx","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":26,"column":11,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":26,"endColumn":14,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[940,943],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[940,943],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":29,"column":11,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":29,"endColumn":14,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1063,1066],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1063,1066],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Fajlajp\\Desktop\\MORE MONEY\\src\\app\\api\\auth\\[...nextauth]\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Fajlajp\\Desktop\\MORE MONEY\\src\\app\\api\\auth\\register\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Fajlajp\\Desktop\\MORE MONEY\\src\\app\\api\\chat\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Fajlajp\\Desktop\\MORE MONEY\\src\\app\\api\\fixed-expenses\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Fajlajp\\Desktop\\MORE MONEY\\src\\app\\api\\goals\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Fajlajp\\Desktop\\MORE MONEY\\src\\app\\api\\transactions\\expense\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Fajlajp\\Desktop\\MORE MONEY\\src\\app\\api\\transactions\\fixed\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Fajlajp\\Desktop\\MORE MONEY\\src\\app\\api\\transactions\\income\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Fajlajp\\Desktop\\MORE MONEY\\src\\app\\error.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Fajlajp\\Desktop\\MORE MONEY\\src\\app\\global-error.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Fajlajp\\Desktop\\MORE MONEY\\src\\app\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Fajlajp\\Desktop\\MORE MONEY\\src\\app\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Fajlajp\\Desktop\\MORE MONEY\\src\\auth.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Fajlajp\\Desktop\\MORE MONEY\\src\\auth.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Fajlajp\\Desktop\\MORE MONEY\\src\\components\\dashboard\\cash-flow-waterfall.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Fajlajp\\Desktop\\MORE MONEY\\src\\components\\dashboard\\insight-card.tsx","messages":[],"suppressedMessages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\Fajlajp\\Desktop\\MORE MONEY\\src\\components\\dashboard\\insight-card.tsx:24:9\n  22 |     useEffect(() => {\n  23 |         // eslint-disable-next-line react-hooks/set-state-in-effect\n> 24 |         setIsVisible(true);\n     |         ^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  25 |     }, []);\n  26 |\n  27 |     const getStyles = () => {","line":24,"column":9,"nodeType":null,"endLine":24,"endColumn":21,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Fajlajp\\Desktop\\MORE MONEY\\src\\components\\dashboard\\savings-progress-bar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Fajlajp\\Desktop\\MORE MONEY\\src\\components\\dashboard\\spending-heatmap.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Fajlajp\\Desktop\\MORE MONEY\\src\\components\\features\\achievements\\badges-grid.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Fajlajp\\Desktop\\MORE MONEY\\src\\components\\features\\ai\\chat-bot.tsx","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":49,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":49,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2156,2159],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2156,2159],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Fajlajp\\Desktop\\MORE MONEY\\src\\components\\features\\analytics\\ai-insights-list.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Badge' is defined but never used.","line":4,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":15,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"Badge"},"fix":{"range":[114,159],"text":""},"desc":"Remove unused import declaration."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\"\r\n\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\"\r\nimport { Badge } from \"@/components/ui/badge\"\r\nimport { ScrollArea } from \"@/components/ui/scroll-area\"\r\nimport { Lightbulb, Info, AlertTriangle } from \"lucide-react\"\r\nimport { format } from \"date-fns\"\r\nimport { cs } from \"date-fns/locale\"\r\n\r\ninterface AiInsight {\r\n    id: string\r\n    type: string\r\n    title: string\r\n    message: string\r\n    createdAt: string\r\n    isRead: boolean\r\n}\r\n\r\ninterface AiInsightsListProps {\r\n    insights: AiInsight[]\r\n}\r\n\r\nexport function AiInsightsList({ insights }: AiInsightsListProps) {\r\n    return (\r\n        <Card className=\"col-span-1 border-indigo-100 dark:border-indigo-900 shadow-md\">\r\n            <CardHeader className=\"bg-gradient-to-r from-indigo-50 to-white dark:from-indigo-950 dark:to-background rounded-t-lg\">\r\n                <CardTitle className=\"flex items-center gap-2 text-indigo-700 dark:text-indigo-300\">\r\n                    <Lightbulb className=\"h-5 w-5 fill-yellow-400 text-yellow-600\" />\r\n                    Chytré Tipy od AI\r\n                </CardTitle>\r\n                <CardDescription>\r\n                    Analyzujeme vaše výdaje a hledáme úspory.\r\n                </CardDescription>\r\n            </CardHeader>\r\n            <CardContent className=\"p-0\">\r\n                <ScrollArea className=\"h-[300px] p-4\">\r\n                    {insights.length === 0 ? (\r\n                        <div className=\"text-center py-8 text-muted-foreground\">\r\n                            Zatím žádné tipy. Zkuste zadat více výdajů (např. tankování).\r\n                        </div>\r\n                    ) : (\r\n                        <div className=\"space-y-4\">\r\n                            {insights.map((insight) => (\r\n                                <div key={insight.id} className=\"flex gap-3 items-start p-3 rounded-lg bg-slate-50 dark:bg-slate-900 border hover:shadow-sm transition-shadow\">\r\n                                    <div className=\"mt-1\">\r\n                                        {insight.type === 'warning' ? <AlertTriangle className=\"h-5 w-5 text-red-500\" /> : <Info className=\"h-5 w-5 text-blue-500\" />}\r\n                                    </div>\r\n                                    <div className=\"flex-1 space-y-1\">\r\n                                        <div className=\"flex justify-between items-start\">\r\n                                            <h4 className=\"font-semibold text-sm\">{insight.title}</h4>\r\n                                            <span className=\"text-xs text-muted-foreground\">{format(new Date(insight.createdAt), \"P\", { locale: cs })}</span>\r\n                                        </div>\r\n                                        <p className=\"text-sm text-slate-600 dark:text-slate-300\">{insight.message}</p>\r\n                                    </div>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    )}\r\n                </ScrollArea>\r\n            </CardContent>\r\n        </Card>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Fajlajp\\Desktop\\MORE MONEY\\src\\components\\features\\analytics\\expense-pie-chart.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Fajlajp\\Desktop\\MORE MONEY\\src\\components\\features\\budget\\fixed-expense-form.tsx","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":59,"column":54,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":59,"endColumn":57,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1911,1914],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1911,1914],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Fajlajp\\Desktop\\MORE MONEY\\src\\components\\features\\expenses\\add-fixed-expense-dialog.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'format' is defined but never used.","line":7,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":16,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"format"},"fix":{"range":[174,207],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CalendarIcon' is defined but never used.","line":8,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":22,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"CalendarIcon"},"fix":{"range":[218,231],"text":""},"desc":"Remove unused variable \"CalendarIcon\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Loader2' is defined but never used.","line":8,"column":24,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":31,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Loader2"},"fix":{"range":[230,239],"text":""},"desc":"Remove unused variable \"Loader2\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Check' is defined but never used.","line":8,"column":33,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":38,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"Check"},"fix":{"range":[209,268],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'cn' is defined but never used.","line":10,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":12,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"cn"},"fix":{"range":[272,304],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'router' is assigned a value but never used.","line":70,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":70,"endColumn":17},{"ruleId":"react-hooks/incompatible-library","severity":1,"message":"Compilation Skipped: Use of incompatible library\n\nThis API returns functions which cannot be memoized without leading to stale UI. To prevent this, by default React Compiler will skip memoizing this component/hook. However, you may see issues if values from this API are passed to other components/hooks that are memoized.\n\nC:\\Users\\Fajlajp\\Desktop\\MORE MONEY\\src\\components\\features\\expenses\\add-fixed-expense-dialog.tsx:84:22\n  82 |     })\n  83 |\n> 84 |     const category = form.watch(\"category\")\n     |                      ^^^^ React Hook Form's `useForm()` API returns a `watch()` function which cannot be memoized safely.\n  85 |\n  86 |     async function onSubmit(data: FixedExpenseFormValues) {\n  87 |         try {","line":84,"column":22,"nodeType":null,"endLine":84,"endColumn":26}],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":74,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":74,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2284,2287],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2284,2287],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\"\r\n\r\nimport { useState } from \"react\"\r\nimport { useForm } from \"react-hook-form\"\r\nimport { zodResolver } from \"@hookform/resolvers/zod\"\r\nimport * as z from \"zod\"\r\nimport { format } from \"date-fns\"\r\nimport { CalendarIcon, Loader2, Check } from \"lucide-react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\nimport { Button } from \"@/components/ui/button\"\r\nimport {\r\n    Dialog,\r\n    DialogContent,\r\n    DialogDescription,\r\n    DialogHeader,\r\n    DialogTitle,\r\n    DialogTrigger,\r\n} from \"@/components/ui/dialog\"\r\nimport {\r\n    Form,\r\n    FormControl,\r\n    FormField,\r\n    FormItem,\r\n    FormLabel,\r\n    FormMessage,\r\n    FormDescription,\r\n} from \"@/components/ui/form\"\r\nimport { Input } from \"@/components/ui/input\"\r\nimport {\r\n    Select,\r\n    SelectContent,\r\n    SelectItem,\r\n    SelectTrigger,\r\n    SelectValue,\r\n} from \"@/components/ui/select\"\r\nimport { Switch } from \"@/components/ui/switch\"\r\nimport { useRouter } from \"next/navigation\"\r\n\r\n// Definice schématu formuláře\r\nconst formSchema = z.object({\r\n    category: z.string().min(1, \"Vyberte kategorii\"),\r\n    customCategoryName: z.string().optional(),\r\n    amount: z.coerce.number().min(1, \"Částka musí být větší než 0\"),\r\n    frequency: z.enum([\"MONTHLY\", \"YEARLY\", \"WEEKLY\"]),\r\n    dueDate: z.coerce.number().min(1).max(31).optional(),\r\n    autoPay: z.boolean().default(false),\r\n    description: z.string().optional(),\r\n})\r\n\r\ntype FixedExpenseFormValues = z.infer<typeof formSchema>\r\n\r\ninterface AddFixedExpenseProps {\r\n    onSuccess?: () => void\r\n}\r\n\r\nconst CATEGORIES = [\r\n    { value: \"rent\", label: \"Nájem / Hypotéka\" },\r\n    { value: \"utilities\", label: \"Energie & Služby\" },\r\n    { value: \"internet\", label: \"Internet & TV\" },\r\n    { value: \"insurance\", label: \"Pojištění\" },\r\n    { value: \"loan\", label: \"Splátky úvěrů\" },\r\n    { value: \"subscription\", label: \"Předplatné (Netflix, Spotify...)\" },\r\n    { value: \"phone\", label: \"Mobilní tarif\" },\r\n    { value: \"other\", label: \"Jiné\" },\r\n]\r\n\r\nexport function AddFixedExpenseDialog({ onSuccess }: AddFixedExpenseProps) {\r\n    const [open, setOpen] = useState(false)\r\n    const router = useRouter()\r\n\r\n    const form = useForm<FixedExpenseFormValues>({\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        resolver: zodResolver(formSchema) as any,\r\n        defaultValues: {\r\n            category: \"\",\r\n            amount: 0,\r\n            frequency: \"MONTHLY\",\r\n            autoPay: false,\r\n            description: \"\",\r\n        },\r\n    })\r\n\r\n    const category = form.watch(\"category\")\r\n\r\n    async function onSubmit(data: FixedExpenseFormValues) {\r\n        try {\r\n            // Zde by bylo volání server action\r\n            // await addFixedExpense(data)\r\n\r\n            // Prozatím simulace\r\n            console.log(\"Submitting:\", data)\r\n\r\n            // Revalidate via router refresh if needed once real backend is connected\r\n            // router.refresh() \r\n\r\n            setOpen(false)\r\n            form.reset()\r\n            onSuccess?.()\r\n        } catch (error) {\r\n            console.error(error)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <Dialog open={open} onOpenChange={setOpen}>\r\n            <DialogTrigger asChild>\r\n                <Button className=\"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white shadow-md\">\r\n                    + Nový fixní výdaj\r\n                </Button>\r\n            </DialogTrigger>\r\n            <DialogContent className=\"sm:max-w-[425px]\">\r\n                <DialogHeader>\r\n                    <DialogTitle>Přidat pravidelný výdaj</DialogTitle>\r\n                    <DialogDescription>\r\n                        Sledujte své fixní náklady jako nájem, energie nebo předplatné.\r\n                    </DialogDescription>\r\n                </DialogHeader>\r\n                <Form {...form}>\r\n                    <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4\">\r\n                        <FormField\r\n                            control={form.control}\r\n                            name=\"category\"\r\n                            render={({ field }) => (\r\n                                <FormItem>\r\n                                    <FormLabel>Kategorie</FormLabel>\r\n                                    <Select onValueChange={field.onChange} defaultValue={field.value}>\r\n                                        <FormControl>\r\n                                            <SelectTrigger>\r\n                                                <SelectValue placeholder=\"Vyberte kategorii\" />\r\n                                            </SelectTrigger>\r\n                                        </FormControl>\r\n                                        <SelectContent>\r\n                                            {CATEGORIES.map((cat) => (\r\n                                                <SelectItem key={cat.value} value={cat.value}>\r\n                                                    {cat.label}\r\n                                                </SelectItem>\r\n                                            ))}\r\n                                        </SelectContent>\r\n                                    </Select>\r\n                                    <FormMessage />\r\n                                </FormItem>\r\n                            )}\r\n                        />\r\n\r\n                        {category === 'other' && (\r\n                            <FormField\r\n                                control={form.control}\r\n                                name=\"customCategoryName\"\r\n                                render={({ field }) => (\r\n                                    <FormItem>\r\n                                        <FormLabel>Název kategorie</FormLabel>\r\n                                        <FormControl>\r\n                                            <Input placeholder=\"Např. Školné\" {...field} />\r\n                                        </FormControl>\r\n                                        <FormMessage />\r\n                                    </FormItem>\r\n                                )}\r\n                            />\r\n                        )}\r\n\r\n                        <div className=\"grid grid-cols-2 gap-4\">\r\n                            <FormField\r\n                                control={form.control}\r\n                                name=\"amount\"\r\n                                render={({ field }) => (\r\n                                    <FormItem>\r\n                                        <FormLabel>Částka (Kč)</FormLabel>\r\n                                        <FormControl>\r\n                                            <Input type=\"number\" {...field} />\r\n                                        </FormControl>\r\n                                        <FormMessage />\r\n                                    </FormItem>\r\n                                )}\r\n                            />\r\n\r\n                            <FormField\r\n                                control={form.control}\r\n                                name=\"frequency\"\r\n                                render={({ field }) => (\r\n                                    <FormItem>\r\n                                        <FormLabel>Účtování</FormLabel>\r\n                                        <Select onValueChange={field.onChange} defaultValue={field.value}>\r\n                                            <FormControl>\r\n                                                <SelectTrigger>\r\n                                                    <SelectValue placeholder=\"Frekvence\" />\r\n                                                </SelectTrigger>\r\n                                            </FormControl>\r\n                                            <SelectContent>\r\n                                                <SelectItem value=\"MONTHLY\">Měsíčně</SelectItem>\r\n                                                <SelectItem value=\"YEARLY\">Ročně</SelectItem>\r\n                                                <SelectItem value=\"WEEKLY\">Týdně</SelectItem>\r\n                                            </SelectContent>\r\n                                        </Select>\r\n                                        <FormMessage />\r\n                                    </FormItem>\r\n                                )}\r\n                            />\r\n                        </div>\r\n\r\n                        <FormField\r\n                            control={form.control}\r\n                            name=\"dueDate\"\r\n                            render={({ field }) => (\r\n                                <FormItem>\r\n                                    <FormLabel>Splatnost (den v měsíci)</FormLabel>\r\n                                    <FormControl>\r\n                                        <Input type=\"number\" min={1} max={31} placeholder=\"Např. 15\" {...field} />\r\n                                    </FormControl>\r\n                                    <FormDescription className=\"text-xs\">\r\n                                        Kdy platba obvykle odchází (nepovinné).\r\n                                    </FormDescription>\r\n                                    <FormMessage />\r\n                                </FormItem>\r\n                            )}\r\n                        />\r\n\r\n                        <FormField\r\n                            control={form.control}\r\n                            name=\"autoPay\"\r\n                            render={({ field }) => (\r\n                                <FormItem className=\"flex flex-row items-center justification-between rounded-lg border p-3 shadow-sm\">\r\n                                    <div className=\"space-y-0.5\">\r\n                                        <FormLabel>Automatická platba</FormLabel>\r\n                                        <FormDescription className=\"text-xs\">\r\n                                            Máte nastavený trvalý příkaz?\r\n                                        </FormDescription>\r\n                                    </div>\r\n                                    <FormControl>\r\n                                        <Switch\r\n                                            checked={field.value}\r\n                                            onCheckedChange={field.onChange}\r\n                                        />\r\n                                    </FormControl>\r\n                                </FormItem>\r\n                            )}\r\n                        />\r\n\r\n                        <Button type=\"submit\" className=\"w-full bg-blue-600 hover:bg-blue-700\">\r\n                            Uložit výdaj\r\n                        </Button>\r\n                    </form>\r\n                </Form>\r\n            </DialogContent>\r\n        </Dialog>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Fajlajp\\Desktop\\MORE MONEY\\src\\components\\features\\goals\\add-goal-dialog.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Textarea' is defined but never used.","line":30,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":30,"endColumn":18,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"Textarea"},"fix":{"range":[721,772],"text":""},"desc":"Remove unused import declaration."}]}],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":54,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":54,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1825,1828],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1825,1828],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\"\r\n\r\nimport { useState } from \"react\"\r\nimport { useForm } from \"react-hook-form\"\r\nimport { zodResolver } from \"@hookform/resolvers/zod\"\r\nimport * as z from \"zod\"\r\nimport { CalendarIcon, Loader2, Target } from \"lucide-react\"\r\nimport { format } from \"date-fns\"\r\nimport { cs } from \"date-fns/locale\"\r\n\r\nimport { Button } from \"@/components/ui/button\"\r\nimport {\r\n    Dialog,\r\n    DialogContent,\r\n    DialogDescription,\r\n    DialogHeader,\r\n    DialogTitle,\r\n    DialogTrigger,\r\n} from \"@/components/ui/dialog\"\r\nimport {\r\n    Form,\r\n    FormControl,\r\n    FormDescription,\r\n    FormField,\r\n    FormItem,\r\n    FormLabel,\r\n    FormMessage,\r\n} from \"@/components/ui/form\"\r\nimport { Input } from \"@/components/ui/input\"\r\nimport { Textarea } from \"@/components/ui/textarea\"\r\nimport { Popover, PopoverContent, PopoverTrigger } from \"@/components/ui/popover\"\r\nimport { Calendar } from \"@/components/ui/calendar\"\r\nimport { useRouter } from \"next/navigation\"\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst goalSchema = z.object({\r\n    name: z.string().min(2, \"Název cíle musí mít alespoň 2 znaky\"),\r\n    targetAmount: z.coerce.number().min(1, \"Cílová částka musí být větší než 0\"),\r\n    currentAmount: z.coerce.number().min(0, \"Aktuální částka nemůže být záporná\").optional().default(0),\r\n    deadline: z.date().optional(),\r\n    description: z.string().optional(),\r\n    imageUrl: z.string().url(\"Neplatná URL obrázku\").optional().or(z.literal(\"\")),\r\n})\r\n\r\ntype GoalFormValues = z.infer<typeof goalSchema>\r\n\r\nexport function AddGoalDialog() {\r\n    const [open, setOpen] = useState(false)\r\n    const [loading, setLoading] = useState(false)\r\n    const router = useRouter()\r\n\r\n    const form = useForm<GoalFormValues>({\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        resolver: zodResolver(goalSchema) as any,\r\n        defaultValues: {\r\n            name: \"\",\r\n            targetAmount: 0,\r\n            currentAmount: 0,\r\n            description: \"\",\r\n            imageUrl: \"\",\r\n        },\r\n    })\r\n\r\n    async function onSubmit(data: GoalFormValues) {\r\n        setLoading(true)\r\n        try {\r\n            const response = await fetch(\"/api/goals\", {\r\n                method: \"POST\",\r\n                headers: { \"Content-Type\": \"application/json\" },\r\n                body: JSON.stringify(data),\r\n            })\r\n\r\n            if (!response.ok) throw new Error(\"Failed to create goal\")\r\n\r\n            form.reset()\r\n            setOpen(false)\r\n            router.refresh()\r\n        } catch (error) {\r\n            console.error(error)\r\n        } finally {\r\n            setLoading(false)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <Dialog open={open} onOpenChange={setOpen}>\r\n            <DialogTrigger asChild>\r\n                <Button className=\"gap-2 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white shadow-lg shadow-blue-500/20 transition-all duration-300 hover:scale-[1.02]\">\r\n                    <Target className=\"h-4 w-4\" />\r\n                    Nový Cíl\r\n                </Button>\r\n            </DialogTrigger>\r\n            <DialogContent className=\"sm:max-w-[500px]\">\r\n                <DialogHeader>\r\n                    <DialogTitle>Vytvořit nový cíl</DialogTitle>\r\n                    <DialogDescription>\r\n                        Nastavte si finanční cíl a sledujte svůj pokrok.\r\n                    </DialogDescription>\r\n                </DialogHeader>\r\n                <Form {...form}>\r\n                    <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4\">\r\n                        <FormField\r\n                            control={form.control}\r\n                            name=\"name\"\r\n                            render={({ field }) => (\r\n                                <FormItem>\r\n                                    <FormLabel>Název cíle</FormLabel>\r\n                                    <FormControl>\r\n                                        <Input placeholder=\"Např. Nové auto, Dovolená...\" {...field} />\r\n                                    </FormControl>\r\n                                    <FormMessage />\r\n                                </FormItem>\r\n                            )}\r\n                        />\r\n                        <div className=\"grid grid-cols-2 gap-4\">\r\n                            <FormField\r\n                                control={form.control}\r\n                                name=\"targetAmount\"\r\n                                render={({ field }) => (\r\n                                    <FormItem>\r\n                                        <FormLabel>Cílová částka</FormLabel>\r\n                                        <FormControl>\r\n                                            <Input type=\"number\" placeholder=\"0\" {...field} />\r\n                                        </FormControl>\r\n                                        <FormMessage />\r\n                                    </FormItem>\r\n                                )}\r\n                            />\r\n                            <FormField\r\n                                control={form.control}\r\n                                name=\"currentAmount\"\r\n                                render={({ field }) => (\r\n                                    <FormItem>\r\n                                        <FormLabel>Aktuálně našetřeno</FormLabel>\r\n                                        <FormControl>\r\n                                            <Input type=\"number\" placeholder=\"0\" {...field} />\r\n                                        </FormControl>\r\n                                        <FormMessage />\r\n                                    </FormItem>\r\n                                )}\r\n                            />\r\n                        </div>\r\n                        <FormField\r\n                            control={form.control}\r\n                            name=\"deadline\"\r\n                            render={({ field }) => (\r\n                                <FormItem className=\"flex flex-col\">\r\n                                    <FormLabel>Datum splnění (volitelné)</FormLabel>\r\n                                    <Popover>\r\n                                        <PopoverTrigger asChild>\r\n                                            <FormControl>\r\n                                                <Button\r\n                                                    variant={\"outline\"}\r\n                                                    className={cn(\r\n                                                        \"w-full pl-3 text-left font-normal\",\r\n                                                        !field.value && \"text-muted-foreground\"\r\n                                                    )}\r\n                                                >\r\n                                                    {field.value ? (\r\n                                                        format(field.value, \"PPP\", { locale: cs })\r\n                                                    ) : (\r\n                                                        <span>Vyberte datum</span>\r\n                                                    )}\r\n                                                    <CalendarIcon className=\"ml-auto h-4 w-4 opacity-50\" />\r\n                                                </Button>\r\n                                            </FormControl>\r\n                                        </PopoverTrigger>\r\n                                        <PopoverContent className=\"w-auto p-0\" align=\"start\">\r\n                                            <Calendar\r\n                                                mode=\"single\"\r\n                                                selected={field.value}\r\n                                                onSelect={field.onChange}\r\n                                                disabled={(date) =>\r\n                                                    date < new Date(\"1900-01-01\")\r\n                                                }\r\n                                                initialFocus\r\n                                            />\r\n                                        </PopoverContent>\r\n                                    </Popover>\r\n                                    <FormMessage />\r\n                                </FormItem>\r\n                            )}\r\n                        />\r\n                        <FormField\r\n                            control={form.control}\r\n                            name=\"imageUrl\"\r\n                            render={({ field }) => (\r\n                                <FormItem>\r\n                                    <FormLabel>Obrázek (URL)</FormLabel>\r\n                                    <FormControl>\r\n                                        <Input placeholder=\"https://...\" {...field} />\r\n                                    </FormControl>\r\n                                    <FormDescription>Odkaz na obrázek pro motivaci</FormDescription>\r\n                                    <FormMessage />\r\n                                </FormItem>\r\n                            )}\r\n                        />\r\n                        <Button type=\"submit\" className=\"w-full\" disabled={loading}>\r\n                            {loading ? <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" /> : null}\r\n                            {loading ? \"Vytvářím...\" : \"Vytvořit cíl\"}\r\n                        </Button>\r\n                    </form>\r\n                </Form>\r\n            </DialogContent>\r\n        </Dialog>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Fajlajp\\Desktop\\MORE MONEY\\src\\components\\features\\goals\\add-goal-sheet.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Fajlajp\\Desktop\\MORE MONEY\\src\\components\\features\\transactions\\add-income-sheet.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Fajlajp\\Desktop\\MORE MONEY\\src\\components\\features\\transactions\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Fajlajp\\Desktop\\MORE MONEY\\src\\components\\features\\transactions\\transaction-form.tsx","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":80,"column":53,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":80,"endColumn":56,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2691,2694],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2691,2694],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Fajlajp\\Desktop\\MORE MONEY\\src\\components\\layout\\cookie-banner.tsx","messages":[],"suppressedMessages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\Fajlajp\\Desktop\\MORE MONEY\\src\\components\\layout\\cookie-banner.tsx:15:13\n  13 |         if (!consent) {\n  14 |             // eslint-disable-next-line react-hooks/set-state-in-effect\n> 15 |             setIsVisible(true)\n     |             ^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  16 |         }\n  17 |     }, [])\n  18 |","line":15,"column":13,"nodeType":null,"endLine":15,"endColumn":25,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Fajlajp\\Desktop\\MORE MONEY\\src\\components\\layout\\sidebar.tsx","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-empty-object-type","severity":2,"message":"An interface declaring no members is equivalent to its supertype.","line":36,"column":11,"nodeType":"Identifier","messageId":"noEmptyInterfaceWithSuper","endLine":36,"endColumn":23,"suggestions":[{"messageId":"replaceEmptyInterfaceWithSuper","fix":{"range":[1058,1129],"text":"type SidebarProps = React.HTMLAttributes<HTMLDivElement>"},"desc":"Replace empty interface with a type alias."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Fajlajp\\Desktop\\MORE MONEY\\src\\components\\layout\\site-header.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Fajlajp\\Desktop\\MORE MONEY\\src\\components\\ui\\avatar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Fajlajp\\Desktop\\MORE MONEY\\src\\components\\ui\\badge.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Fajlajp\\Desktop\\MORE MONEY\\src\\components\\ui\\button.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Fajlajp\\Desktop\\MORE MONEY\\src\\components\\ui\\calendar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Fajlajp\\Desktop\\MORE MONEY\\src\\components\\ui\\card.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Fajlajp\\Desktop\\MORE MONEY\\src\\components\\ui\\checkbox.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Fajlajp\\Desktop\\MORE MONEY\\src\\components\\ui\\dialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Fajlajp\\Desktop\\MORE MONEY\\src\\components\\ui\\form.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Fajlajp\\Desktop\\MORE MONEY\\src\\components\\ui\\input.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Fajlajp\\Desktop\\MORE MONEY\\src\\components\\ui\\label.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Fajlajp\\Desktop\\MORE MONEY\\src\\components\\ui\\mode-toggle.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Fajlajp\\Desktop\\MORE MONEY\\src\\components\\ui\\popover.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Fajlajp\\Desktop\\MORE MONEY\\src\\components\\ui\\progress.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Fajlajp\\Desktop\\MORE MONEY\\src\\components\\ui\\radio-group.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Fajlajp\\Desktop\\MORE MONEY\\src\\components\\ui\\scroll-area.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Fajlajp\\Desktop\\MORE MONEY\\src\\components\\ui\\select.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Fajlajp\\Desktop\\MORE MONEY\\src\\components\\ui\\separator.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Fajlajp\\Desktop\\MORE MONEY\\src\\components\\ui\\sheet.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Fajlajp\\Desktop\\MORE MONEY\\src\\components\\ui\\skeleton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Fajlajp\\Desktop\\MORE MONEY\\src\\components\\ui\\switch.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Fajlajp\\Desktop\\MORE MONEY\\src\\components\\ui\\tabs.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Fajlajp\\Desktop\\MORE MONEY\\src\\components\\ui\\textarea.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Fajlajp\\Desktop\\MORE MONEY\\src\\components\\ui\\tooltip.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Fajlajp\\Desktop\\MORE MONEY\\src\\lib\\ai.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Fajlajp\\Desktop\\MORE MONEY\\src\\lib\\gamification.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Fajlajp\\Desktop\\MORE MONEY\\src\\lib\\prismadb.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'id' is assigned a value but never used.","line":65,"column":21,"nodeType":"Identifier","messageId":"unusedVar","endLine":65,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'now' is assigned a value but never used.","line":75,"column":19,"nodeType":"Identifier","messageId":"unusedVar","endLine":75,"endColumn":22},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'now' is assigned a value but never used.","line":169,"column":19,"nodeType":"Identifier","messageId":"unusedVar","endLine":169,"endColumn":22},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'now' is assigned a value but never used.","line":214,"column":19,"nodeType":"Identifier","messageId":"unusedVar","endLine":214,"endColumn":22}],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":26,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":26,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1330,1333],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1330,1333],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":44,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":44,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2436,2439],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2436,2439],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":48,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":48,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2503,2506],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2503,2506],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":58,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":58,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3209,3212],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3209,3212],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":64,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":64,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3573,3576],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3573,3576],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":72,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":72,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3822,3825],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3822,3825],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":82,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":82,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4261,4264],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4261,4264],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":87,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":87,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4457,4460],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4457,4460],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":97,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":97,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5125,5128],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5125,5128],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":103,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":103,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5516,5519],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5516,5519],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":107,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":107,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5627,5630],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5627,5630],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":113,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":113,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5838,5841],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5838,5841],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":117,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":117,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6099,6102],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6099,6102],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":124,"column":53,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":124,"endColumn":56,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6389,6392],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6389,6392],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":166,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":166,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8514,8517],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8514,8517],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":181,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":181,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9522,9525],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9522,9525],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":187,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":187,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9895,9898],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9895,9898],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":191,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":191,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10096,10099],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10096,10099],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":196,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":196,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10385,10388],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10385,10388],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":211,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":211,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10905,10908],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10905,10908],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":221,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":221,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11373,11376],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11373,11376],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":227,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":227,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11737,11740],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11737,11740],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":230,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":230,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11879,11882],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11879,11882],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/* eslint-disable @typescript-eslint/no-explicit-any */\r\nimport { PrismaClient } from '@prisma/client'\r\nimport { PrismaPg } from '@prisma/adapter-pg'\r\nimport { Pool } from 'pg'\r\nimport { v4 as uuidv4 } from 'uuid';\r\nimport { AiInsight } from './schema-types';\r\n\r\nconst pool = new Pool({ connectionString: process.env.DATABASE_URL })\r\nconst adapter = new PrismaPg(pool)\r\nconst prisma = new PrismaClient({ adapter })\r\n\r\n// Helper to extend Prisma with Raw SQL methods for new models\r\nconst extendedPrisma = {\r\n    ...prisma,\r\n    aiInsight: {\r\n        create: async (args: { data: Omit<AiInsight, 'id' | 'createdAt' | 'isRead' | 'isActedOn'> }) => {\r\n            const data = args.data;\r\n            const id = uuidv4();\r\n            const now = new Date();\r\n            await prisma.$executeRaw`\r\n        INSERT INTO \"AiInsight\" (\"id\", \"userId\", \"type\", \"category\", \"title\", \"message\", \"potentialSaving\", \"priority\", \"isRead\", \"isActedOn\", \"createdAt\", \"expiresAt\")\r\n        VALUES (${id}, ${data.userId}, ${data.type}, ${data.category || null}, ${data.title}, ${data.message}, ${data.potentialSaving || null}, ${data.priority}, false, false, ${now}, ${data.expiresAt || null})\r\n      `;\r\n            return { ...data, id, createdAt: now, isRead: false, isActedOn: false } as AiInsight;\r\n        },\r\n        findMany: async (args: any) => {\r\n            const userId = args.where.userId;\r\n            const isRead = args.where.isRead;\r\n            const limit = args.take ? `LIMIT ${args.take}` : '';\r\n            const orderBy = args.orderBy && args.orderBy.createdAt === 'desc' ? `ORDER BY \"createdAt\" DESC` : '';\r\n\r\n            if (isRead !== undefined) {\r\n                return await prisma.$queryRawUnsafe(`SELECT * FROM \"AiInsight\" WHERE \"userId\" = '${userId}' AND \"isRead\" = ${isRead} ${orderBy} ${limit}`);\r\n            }\r\n            return await prisma.$queryRawUnsafe(`SELECT * FROM \"AiInsight\" WHERE \"userId\" = '${userId}' ${orderBy} ${limit}`);\r\n        },\r\n        update: async (args: { where: { id: string }, data: Partial<AiInsight> }) => {\r\n            const { id } = args.where;\r\n            // Minimal update implementation for read status\r\n            if (args.data.isRead !== undefined) {\r\n                await prisma.$executeRaw`UPDATE \"AiInsight\" SET \"isRead\" = ${args.data.isRead} WHERE \"id\" = ${id}`;\r\n            }\r\n            // Return simplistic updated object\r\n            return { id, ...args.data } as any;\r\n        }\r\n    },\r\n    goal: {\r\n        create: async (args: any) => {\r\n            const data = args.data;\r\n            const id = uuidv4();\r\n            const now = new Date();\r\n            await prisma.$executeRaw`\r\n                INSERT INTO \"Goal\" (\"id\", \"userId\", \"name\", \"targetAmount\", \"currentAmount\", \"deadline\", \"description\", \"imageUrl\", \"priority\", \"isCompleted\", \"createdAt\", \"updatedAt\")\r\n                VALUES (${id}, ${data.userId}, ${data.name}, ${data.targetAmount}, ${data.currentAmount}, ${data.deadline}, ${data.description}, ${data.imageUrl}, ${data.priority || 1}, ${data.isCompleted || false}, ${now}, ${now})\r\n             `;\r\n            return { id, ...data, createdAt: now, updatedAt: now };\r\n        },\r\n        findMany: async (args: any) => {\r\n            const userId = args.where.userId;\r\n            const orderBy = args.orderBy ? `ORDER BY \"createdAt\" DESC` : ''; // Default sort\r\n            return await prisma.$queryRawUnsafe(`SELECT * FROM \"Goal\" WHERE \"userId\" = '${userId}' ${orderBy}`);\r\n        },\r\n        // We might need update for contributions later\r\n        update: async (args: any) => {\r\n            const { id } = args.where;\r\n            // Minimal update\r\n            //  await prisma.$executeRaw`UPDATE \"Goal\" ...`; \r\n            return args.data;\r\n        }\r\n    },\r\n    goalContribution: {\r\n        create: async (args: any) => {\r\n            const data = args.data;\r\n            const id = uuidv4();\r\n            const now = new Date();\r\n            await prisma.$executeRaw`\r\n                INSERT INTO \"GoalContribution\" (\"id\", \"goalId\", \"amount\", \"date\", \"notes\")\r\n                VALUES (${id}, ${data.goalId}, ${data.amount}, ${data.date}, ${data.notes})\r\n            `;\r\n            return { id, ...data };\r\n        },\r\n        findMany: async (args: any) => {\r\n            return await prisma.$queryRaw`SELECT * FROM \"GoalContribution\" WHERE \"goalId\" = ${args.where.goalId}`;\r\n        }\r\n    },\r\n    fixedExpense: {\r\n        create: async (args: any) => {\r\n            const data = args.data;\r\n            const id = uuidv4();\r\n            const now = new Date();\r\n            await prisma.$executeRaw`\r\n                INSERT INTO \"FixedExpense\" (\"id\", \"userId\", \"category\", \"customCategoryName\", \"amount\", \"frequency\", \"dueDate\", \"autoPay\", \"description\", \"createdAt\", \"updatedAt\")\r\n                VALUES (${id}, ${data.userId}, ${data.category}, ${data.customCategoryName}, ${data.amount}, ${data.frequency}, ${data.dueDate}, ${data.autoPay}, ${data.description}, ${now}, ${now})\r\n             `;\r\n            return { id, ...data, createdAt: now, updatedAt: now };\r\n        },\r\n        findMany: async (args: any) => {\r\n            const userId = args.where.userId;\r\n            const limit = args.take ? `LIMIT ${args.take}` : '';\r\n            const orderBy = args.orderBy ? `ORDER BY amount DESC` : ''; // Simplified sorting\r\n            return await prisma.$queryRawUnsafe(`SELECT * FROM \"FixedExpense\" WHERE \"userId\" = '${userId}' ${orderBy} ${limit}`);\r\n        },\r\n        update: async (args: any) => {\r\n            // Placeholder\r\n            return args.data;\r\n        },\r\n        delete: async (args: any) => {\r\n            await prisma.$executeRaw`DELETE FROM \"FixedExpense\" WHERE \"id\" = ${args.where.id}`;\r\n            return args.where;\r\n        }\r\n    },\r\n    userPoints: {\r\n        findUnique: async (args: any) => {\r\n            const result = await prisma.$queryRaw`SELECT * FROM \"UserPoints\" WHERE \"userId\" = ${args.where.userId} LIMIT 1`;\r\n            return Array.isArray(result) && result.length > 0 ? result[0] : null;\r\n        },\r\n        upsert: async (args: any) => {\r\n            const userId = args.where.userId;\r\n            const createData = args.create;\r\n            const updateData = args.update;\r\n            const now = new Date();\r\n\r\n            // Check if user points record exists\r\n            const existing = await prisma.$queryRaw<any[]>`SELECT * FROM \"UserPoints\" WHERE \"userId\" = ${userId} LIMIT 1`;\r\n\r\n            if (existing && existing.length > 0) {\r\n                // Update\r\n                // Logic to increment points if 'increment' is passed in updateData (Prisma syntax: { totalPoints: { increment: 10 } })\r\n                let newPoints = existing[0].totalPoints;\r\n                let newLevel = existing[0].level;\r\n\r\n                if (updateData.totalPoints && updateData.totalPoints.increment) {\r\n                    newPoints += updateData.totalPoints.increment;\r\n                }\r\n\r\n                // Simple level calculation: 1 level per 1000 points\r\n                newLevel = Math.floor(newPoints / 1000) + 1;\r\n\r\n                await prisma.$executeRaw`\r\n                    UPDATE \"UserPoints\" \r\n                    SET \"totalPoints\" = ${newPoints}, \"level\" = ${newLevel}, \"updatedAt\" = ${now}\r\n                    WHERE \"userId\" = ${userId}\r\n                 `;\r\n                return { ...existing[0], totalPoints: newPoints, level: newLevel, updatedAt: now };\r\n            } else {\r\n                // Create\r\n                const id = uuidv4();\r\n                await prisma.$executeRaw`\r\n                    INSERT INTO \"UserPoints\" (\"id\", \"userId\", \"totalPoints\", \"level\", \"currentStreak\", \"longestStreak\", \"updatedAt\")\r\n                    VALUES (${id}, ${userId}, ${createData.totalPoints || 0}, ${createData.level || 1}, ${createData.currentStreak || 0}, ${createData.longestStreak || 0}, ${now})\r\n                 `;\r\n                return { id, userId, totalPoints: createData.totalPoints || 0, level: createData.level || 1, updatedAt: now };\r\n            }\r\n        },\r\n        findLeaderboard: async (limit = 10) => {\r\n            return await prisma.$queryRawUnsafe(`\r\n                SELECT u.\"name\", u.\"avatarUrl\", up.\"totalPoints\", up.\"level\" \r\n                FROM \"UserPoints\" up\r\n                JOIN \"User\" u ON up.\"userId\" = u.\"id\"\r\n                ORDER BY up.\"totalPoints\" DESC\r\n                LIMIT ${limit}\r\n             `);\r\n        }\r\n    },\r\n    variableExpense: {\r\n        create: async (args: any) => {\r\n            const data = args.data;\r\n            const id = uuidv4();\r\n            const now = new Date();\r\n            // Note: tags is an array, we need to format it for postgres array literal or let prisma raw handle if possible.\r\n            // Using simple string casting for safety or empty array.\r\n            // Postgres array syntax: '{tag1, tag2}'\r\n            const tagsSql = data.tags && data.tags.length > 0 ? `{${data.tags.join(',')}}` : '{}';\r\n\r\n            await prisma.$executeRaw`\r\n                INSERT INTO \"VariableExpense\" (\"id\", \"userId\", \"category\", \"subcategory\", \"amount\", \"date\", \"description\", \"isImpulse\", \"merchant\", \"paymentMethod\", \"tags\")\r\n                VALUES (${id}, ${data.userId}, ${data.category}, ${data.subcategory}, ${data.amount}, ${data.date}, ${data.description}, ${data.isImpulse}, ${data.merchant}, ${data.paymentMethod || null}, ${tagsSql}::text[])\r\n             `;\r\n            return { id, ...data };\r\n        },\r\n        findMany: async (args: any) => {\r\n            const userId = args.where.userId;\r\n            const limit = args.take ? `LIMIT ${args.take}` : '';\r\n            const orderBy = args.orderBy ? `ORDER BY date DESC` : '';\r\n            return await prisma.$queryRawUnsafe(`SELECT * FROM \"VariableExpense\" WHERE \"userId\" = '${userId}' ${orderBy} ${limit}`);\r\n        },\r\n        aggregate: async (args: any) => {\r\n            // Simplified aggregation for dashboard total\r\n            if (args._sum && args._sum.amount) {\r\n                const userId = args.where.userId;\r\n                const result: any[] = await prisma.$queryRawUnsafe(`SELECT SUM(amount) as sum FROM \"VariableExpense\" WHERE \"userId\" = '${userId}'`);\r\n                return { _sum: { amount: result[0]?.sum || 0 } };\r\n            }\r\n            return { _sum: { amount: 0 } };\r\n        },\r\n        groupBy: async (args: any) => {\r\n            // New method for Pie Chart\r\n            const userId = args.where.userId;\r\n            if (args.by.includes('category')) {\r\n                return await prisma.$queryRawUnsafe(`\r\n                    SELECT category, SUM(amount) as _sum \r\n                    FROM \"VariableExpense\" \r\n                    WHERE \"userId\" = '${userId}' \r\n                    GROUP BY category\r\n                `);\r\n            }\r\n            return [];\r\n        }\r\n    },\r\n    income: {\r\n        create: async (args: any) => {\r\n            const data = args.data;\r\n            const id = uuidv4();\r\n            const now = new Date();\r\n            await prisma.$executeRaw`\r\n                INSERT INTO \"Income\" (\"id\", \"userId\", \"amount\", \"source\", \"description\", \"date\")\r\n                VALUES (${id}, ${data.userId}, ${data.amount}, ${data.source}, ${data.description}, ${data.date})\r\n             `;\r\n            return { id, ...data };\r\n        },\r\n        findMany: async (args: any) => {\r\n            const userId = args.where.userId;\r\n            const limit = args.take ? `LIMIT ${args.take}` : '';\r\n            const orderBy = args.orderBy ? `ORDER BY date DESC` : '';\r\n            return await prisma.$queryRawUnsafe(`SELECT * FROM \"Income\" WHERE \"userId\" = '${userId}' ${orderBy} ${limit}`);\r\n        },\r\n        aggregate: async (args: any) => {\r\n            if (args._sum && args._sum.amount) {\r\n                const userId = args.where.userId;\r\n                const result: any[] = await prisma.$queryRawUnsafe(`SELECT SUM(amount) as sum FROM \"Income\" WHERE \"userId\" = '${userId}'`);\r\n                return { _sum: { amount: result[0]?.sum || 0 } };\r\n            }\r\n            return { _sum: { amount: 0 } };\r\n        }\r\n    }\r\n};\r\n\r\nexport { extendedPrisma as prisma }\r\n// Casting to any to avoid TypeScript errors when Prisma Client types are not generated\r\n// export const prisma = extendedPrisma as any;","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Fajlajp\\Desktop\\MORE MONEY\\src\\lib\\schema-types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Fajlajp\\Desktop\\MORE MONEY\\src\\lib\\utils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Fajlajp\\Desktop\\MORE MONEY\\src\\middleware.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]